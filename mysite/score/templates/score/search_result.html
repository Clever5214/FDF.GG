{% extends "main/base.html" %}
{% block content %}

{% load static %}
<html>

<head>
	<style>
		.score_main{
			width: 650px;
		}
		.champ_img{
			width: 80px;
			height: 80px;

		}
		.spell{
			width: 40px;
			height: 40px;
		}
		.sub-rune{
			width: 25px;
			height: 25px;
		}
	</style>

</head>
<title>전적검색</title>

<body>

	<div class='mx-auto'>
		<div class='grid grid-cols-3'>
			<div class="col-span-1 mx-auto p-6 ml-8 mt-4">
				<div id='nick_name' class='font-bold text-3xl'>
					{{ sum_result.name }}
				</div>
				<br>
				<div id='tier' class='ml-2'>
					<div id='solo_tier'>
						<strong>Solo</strong>
					</div>
					<br>
					<div id='flex_tier'>
						<strong>KAL_TOT {{ sum_result.kal_total }} </strong>
					</div>
				</div>
			</div>
			<div class="col-span-2 w">
				<div class="container p-6">
					{% for key,value in kal_data.items %}
					<div id="{{ key }}_main" class="score_main border-4 rounded-lg flex flex-wrap">
						<div class="grid grid-cols-2">
							<img class="champ_img rounded-lg" src="{{ value.champid }}">
							<div class="grid grid-cols-2">
								<div>
									<img class="spell rounded" src="{{ value.spell_1}}">
									<img class="spell rounded" src="{{ value.spell_2}}">
								</div> 
								<div>
									{% load staticfiles %}
									<img class="h-10 w-10 rounded-lg bg-gray-900 bg-opacity-75" src="{{value.main_rune}}">
									<img class="sub-rune mx-auto rounded" src="{{ value.sub_rune }}">
								</div>
							</div>
						</div>
						<div>
							
						</div>
						<div class="my-auto font-bold mx-auto">
							{{ value.kda }} <br>{{ value.kill }} / {{ value.death }} / {{ value.assist }} //{{value.game_id}}
						</div>
						<div>
							<button  onclick='itembar_0("{{ key }}")' id='{{ key }}_execute'> 
								feel like ass
							</button>
						</div>
					

						<div id="{{ key }}_more" style="display: none" class="score_main">
							<div style="display: none">
								<form id="{{ key }}_id">
									<input name="gameid" value="{{value.game_id}}">
								</form>
							</div>
					 	</div>

						<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
						<script>

							$('#{{ key }}_execute').click(function () {
								$.ajax({
									url: './more',
									type: 'post',
									data: $('#{{ key }}_id').serialize(),
									success: function (data) {
										$('#{{ key }}_more').html(data);
									}
								})
							})
							/*

							document.getElementById('{{ key }}_execute').addEventListener('click', function (event) {
								var xhr = new XMLHttpRequest();

								xhr.open('POST', './more', true);
								xhr.onreadystatechange = function () {
									if (xhr.readyState === 4 && xhr.status === 200) {
										document.getElementById('{{ key }}_more').innerHTML = xhr.responseText;
									}
								}

								xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
								var data = document.getElementById('#{{ key }}_id')
								xhr.send(diss);
							});

*/

							var bg = '{{ value.win }}'
							var box = document.getElementById("{{key}}_main");
							if (bg == 'False') {
								box.style.backgroundColor = "FF787E";
							} else {
								box.style.backgroundColor = "78CDFF";
							};


							function itembar_0(bar2) {
								var tempt = document.getElementById(bar2 + '_more');
								if (tempt.style.display === 'none') {
									tempt.style.display = 'block'
								} else {
									tempt.style.display = 'none'
								}
							}

						</script>
					</div>

					{% endfor %}
					<button> ass</button>
				</div>

			</div>
		</div>
	</div>
	{% endblock %}
</body>

</html>